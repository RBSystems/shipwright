[
  {
    "name": "Joe-Test",
    "trigger": "interval:15s",
    "if": {
      "state-query": {
        "query": "'DeviceID' == 'ITB-1101-CP1'",
        "cache-name": "default"
      }
    },
    "then": [
      {
        "do": "add-alert",
        "with": {
          "alert": "hi",
          "type": "missing heartbeat",
          "msg log": ["something went wrong with {{.StaticDevice.DeviceID}}"],
          "severity": "test"
        }
      },
      {
        "do": "send-email",
        "with": {
          "recipients": "matt_blodgett@byu.edu, danny_randall@byu.edu",
          "sender": "{{.StaticDevice.DeviceID}}@byu.edu",
          "user": "",
          "pass": "",
          "subject": "Cabinet Opened in {{.StaticDevice.RoomID}} // TODO these fields use go's templating engine",
          "body": "A cabinet was opened in {{.StaticDevice.RoomID}} at {{.StaticDevice.Timestamp}}.",
          "smtp-addr": "gateway.byu.edu:25"
        }
      }
    ]
  }
]
